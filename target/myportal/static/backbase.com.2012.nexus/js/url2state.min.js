b$.module("bd.url2state",function(){var e;var g=new RegExp("\\$\\{[^\\}\\|]+?\\|.+?\\}","g");var f=function(h){return h.split(/\//).map(function(j){var i=j.match(/^\$\{(.+?)\|(.+?)\}$/);if(i){return{item:i[1],variable:i[2]}}})};var b=function(i,h){var j=i.split(/\//).map(function(k){if(k.match(g)){return k.replace(g,h.splice(0,1))}return k}).join("/");return j};var c=function(p,u){var n=jQuery(u),o=f(p),q=[],h,m,k,t,r,s,j=function(i,l){r=jQuery(l).parent();r.find("> properties > property").each(function(v,w){s=jQuery(w);h=jQuery("> value",s).text().match(t);if(h){q.push(h[1])}})};for(m=0,k=o.length;m<k;m++){t=new RegExp("\\$\\{"+o[m].variable+"\\|(.+?)\\}");n.find("children name:contains("+o[m].item+")").each(j)}return q.join("/")};var d=function(j,h,p,q){switch(arguments.length){case 4:e=j;break;case 3:if(!e){throw new Error("Global value for url template is not available")}q=p;p=h;h=j;j=e;break;default:throw new Error("invalid arguments number, expected 3 or 4, passed "+arguments.length)}var o=window.location.href;aUrl=o.split(/\/\//);aStateUrl=aUrl[aUrl.length-1].split(/\//);var n=j.split(/\//);for(var m=0,k=n.length;m<k;m++){if(n[m]==="${"+h+"|"+p+"}"){aStateUrl[m]=q;break}}aUrl[aUrl.length-1]=aStateUrl.join("/");o=aUrl.join("//");return o};var a=function(h,i,j){};this.urlTemplate=e;this.applyVariables=b;this.applyDefaults=c;this.setUrlState=a});