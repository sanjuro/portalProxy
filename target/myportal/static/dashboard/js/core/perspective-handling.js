bd.registerPerspectiveHanlding=function(s,m){var h=b$.require("portal.models.layout-examples.MaximizedLayoutModel");var i=b$.require("portal.views.layouts.MaximizedLayoutView");var n=b$.require("portal.models.item.DataType");var e=b$.require("portal.models.item.StringDataType");var j=b$.require("portal.models.item.Preference");var a=b$.require("portal.models.item.Preferences");var f=b$.require("portal.template.SimpleURITemplate");var p=b$.require("portal.widget.Perspective");var k=b$.require("portal.widget.PerspectiveType");var b=b$.require("portal.widget.PerspectiveParameter");var c=b$.require("portal.widget.PerspectiveParameters");var l=b$.require("portal.models.item.Container");var r=b$.require("portal.views.holder.WidgetHolder");var o=b$.require("portal.models.holder.WidgetHolder");var q=b$.require("portal.views.item.ItemViewsTreeVisitor");var g=n.extend();g.prototype.test=function(t){return typeof t=="number"};g.prototype.parseFromString=function(t){return Number(t)};g.prototype.serializeToString=function(t){return String(t)};var d=r.extend();d.prototype.getElementByHint=function(t){return this.html};d.prototype.createHTML=function(x){var v=this;var B=this.model;if(bd.designMode=="true"){var y=new b("designMode",bd.designMode);var u=B.getCurrentPerspective();u.getParameters().add(y)}var A=B.getCurrentPerspective().getType().getName();var w=B.getItem().getPreference("perspective");if(w&&A!=w){B.setCurrentPerspective(new p(new f("/","/"),new k(w),new c()));A=w}this.html=r.prototype.createHTML.call(this,x);var z=B.getItem().getPreference("isMaximizable");if(z!="false"&&bd.designMode=="null"){jQuery(this.html).click(function(I){if(B.clicked){return}B.clicked=true;var J=B.getCurrentPerspective().getType().getName();if(J!="Maximized"){if(bd.isDebugWidgetsReg){console.log("bd.WidgetRegistration > current widget mode: "+J)}var G=new c();var D=new b("perspective","Maximized");var F=new b("designMode",bd.designMode);G.add(D);G.add(F);var K=new p(new f("/","/"),new k("Maximized"),G);var H=new o(B.getItem(),K,B.getLayoutHint(),B.perspectiveFactory);var E=m.createView(H);be.openDialog({event:I,htmlContent:E.getHTML(x)});if(bd.isDebugWidgetsReg){console.log("bd.WidgetRegistration > open dialog done")}var C=function(){new q(bd.oPortalClient.getPageView()).visitTopDown(function(L){if(L.getModel()==B&&B.clicked){B.clicked=null;L.getItemView().release();var N="Dashboard";var O=new b("perspective",N);var M=new c();M.add(O);B.setCurrentPerspective(new p(new f("/","${perspective}"),new k(N),M))}})};jQuery(".bd-closeIcon").bind("click",C)}})}else{if(bd.designMode=="true"){var t=v;jQuery(this.html).click(function(D){var C=B.item.getTitle();if(jQuery("#editWidgetTabs_Permissions").length){return false}be.openDialog({event:D,small:true,htmlContent:'<div class="Maximized portal-widgetHolder widgetHolder-autoheight bd-portalPermissions"><div id="editWidgetTabs_Permissions" class="editWidgetTabs_Permissions"></div></div>',header:'"'+C+'" Widget Permissions',closeIcon:true,callback:function(){bd.portalClientExt.loadWidgetPermission(t)}})})}}jQuery(this.html).addClass(A);return this.html};s.registerView(o,d);s.registerView(h,i);m.registerLayout("maximized",h)};