b$.module("bd",function(){var b=b$.require("b$.Class");var d=b$.require("b$.mvc.Model");var c=b$.require("bd.DataSource");var a=this.PagedList=c.extend(function(e){this._$viewport=jQuery(e.viewport);this._keepContent=e.keepContent||false;e.viewport=this._$viewport.find(".bd-listDataholder")[0];c.call(this,e);this._selectedItem=null;this._selectedItemId=null;if(this._$viewport.length==0){throw ("PagedList constructor needs a viewport node option.")}var f=this;this._$viewport.delegate(".bd-listLoadMoreButton","click",function(){f.requestNextPage(true)});this._$viewport.delegate(".bd-listNextPageButton","click",function(){f.requestNextPage(f._keepContent)});this._$viewport.delegate(".bd-listPreviousPageButton","click",function(){f.requestPreviousPage(f._keepContent)});this._$viewport.delegate(".bd-listPageDots","click",function(){f.setPage(parseInt(this.getAttribute("page")));f.requestPage(f._keepContent)});this.addObserver("pagechange",this.checkPaging,this);this._$viewport.delegate(".bd-listItem","click",function(){f.selectItem(this)})});a.prototype.checkPaging=function(){if(!this.getRemainingRecordCount()||this.getTotalRecordCount()<=0){this._$viewport.find(".bd-listLoadMoreButton").addClass("bd-disabled");this._$viewport.find(".bd-listNextPageButton").addClass("bd-disabled bd-listNextPageButton-disabled")}else{this._$viewport.find(".bd-listLoadMoreButton").removeClass("bd-disabled");this._$viewport.find(".bd-listNextPageButton").removeClass("bd-disabled bd-listNextPageButton-disabled")}if(this._offset>0){this._$viewport.find(".bd-listPreviousPageButton").removeClass("bd-disabled bd-listPreviousPageButton-disabled")}else{this._$viewport.find(".bd-listPreviousPageButton").addClass("bd-disabled bd-listPreviousPageButton-disabled")}var j=this.getTotalPageCount();var h=this._$viewport.find(".bd-listPageDots");var g=this.getCurrentPageNumber();if(h.length){if(j==1){h.hide()}else{var e=Math.max(h.length,j);for(var f=0;f<e;f++){if(f>=h.length){$newDot=jQuery(h[0]).clone().insertAfter(h[f-1]);h=this._$viewport.find(".bd-listPageDots")}$dot=jQuery(h[f]);if(f>j-1){$dot.remove()}else{$dot.attr("page",f);$dot.show();if(f==g){$dot.addClass("bd-active")}else{$dot.removeClass("bd-active")}}}}}};a.prototype.selectItemById=function(e){var f=this._$viewport.find('a[itemid="'+e+'"]')[0];this.selectItem(f)};a.prototype.selectItem=function(e){this._$viewport.find('a[itemid="'+this._selectedItemId+'"]').removeClass("bd-selected");if(e){this._$viewport.find(e).addClass("bd-selected");this._selectedItem=e;this._selectedItemId=e.getAttribute("itemid")}else{this._selectedItem=null;this._selectedItemId=null}this.notifyObservers("select")};a.prototype.unSelectItem=function(e){this.selectItem(null)};a.prototype.getSelectItem=function(){return this._selectedItem};a.prototype.getSelectItemId=function(){return this._selectedItemId}});