define(function(e,g,c){var m=be.contextRoot+"/static/dashboard/templates/html/CatalogManager/";var k=be.contextRoot+"/static/dashboard/templates/xml/CatalogManager/";var i="bi-pm-nav-page";var a={page:"bi-pm-nav-master-page",widget:"bi-pm-diamond",contenttype:"bi-pm-structuredcontent-type",container:"bi-pm-layout",feature:"bi-pm-sharedfeatures",template:"bi-pm-stamp",templatepage:"bi-pm-page-stamp",templatelink:"bi-pm-link-stamp",templatewidget:"bi-pm-diamond-stamp",templatecontainer:"bi-pm-layout-stamp"};function h(p,o){return be.utils.processXMLTemplateByUrl(m+p,o)}function j(p,o){return be.utils.processXMLTemplateByUrl(k+p,o)}function b(o,p){if(o&&p){return Mustache.to_html(o,p)}}function f(p,o){if(p.length>o){return p.substr(0,o-1)+"..."}return p}function d(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(p){var o=Math.random()*16|0;return(p==="x"?o:(o&3|8)).toString(16)})}function n(q,p,o){return bc.component.notify({uid:d(),icon:p||"attention",message:q})}function l(u,s,q){var p=$(u),r={},o=$("> properties > property",p),t={};t.properties=[];o.each(function(w,v){var A=$(this),y={},x=A.attr("name"),z=$("value",A);r[x]=z.text();if(["title","src","defaultStartFile","thumbnailUrl"].indexOf(x)===-1){y.propName=x;y.propTitle=A.attr("label")||x;y.propValue=z.text();y.propType=z.attr("type");y.propViewHint=A.attr("viewHint");y.propManageable=A.attr("manageable");t.properties.push(y)}});t.type=u.tagName;t.itemType=$("> type",p).text().toLowerCase();t.ucType=t.type.toUpperCase();t.name=$("> name",p).text();t.contextItemName=$("> contextItemName",p).text();t.createdBy=$("> createdBy",p).text();t.createdTimestamp=bd.date.formatDateTime($("> createdTimestamp",p).text());t.lastModifiedBy=$("> lastModifiedBy",p).text();t.lastModifiedTimestamp=bd.date.formatDateTime($("> lastModifiedTimestamp",p).text());t.securityProfile=$("> securityProfile",p).text();t.publishState=$("> publishState",p).text();t.uuid=$("> uuid",p).text();t.lockState=$("> lockState",p).text();t.isExportable=t.ucType!=="CONTAINER"||r.config;t.src=r.src;t.defaultStartFile=r.defaultStartFile;t.thumbnailUrl=r.thumbnailUrl;t.title=r.title;t.parsedThumbnailUrl=be.utils.replaceParams(r.thumbnailUrl,bd.oPortalClient.params)+(t.name===q?"?"+Math.random():"");t.tags=[];t.notInPortalCatalog=t.contextItemName!==bd.selectedPortalName;p.find("> tags > tag").each(function(){var w=$(this),v={};v.type=w.attr("type");v.name=w.text();if(v.name==="deprecated"){t.deprecated=true}if(v.name==="cxpManager"){t.cxpManager=true}t.tags.push(v)});t.isWidget=t.type==="widget";t.isTypedef=t.type==="contenttype";t.icon=a[t.type+t.itemType]||a[t.type]||i;return t}c.exports={notify:n,shrink:f,parseItem:l,applyTxtTpl:b,getXmlTemplate:j,getHtmlTemplate:h}});