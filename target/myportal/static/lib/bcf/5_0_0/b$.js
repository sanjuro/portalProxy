/*******************************************************************
 *
 *		Backbase Client 5.2.0.0 20120504-1127
 *
 *		Copyright Backbase 2008 / All rights reserved
 *		Author : Backbase R&D
 *
 *******************************************************************/
window.b$={version:"5.2.0.0",timestamp:"20120504-1127"};if(window.OpenAjax){OpenAjax.hub.registerLibrary("b$","http://backbase.com",b$.version)}b$.browser=(function(){var a={ie:false,gecko:false,opera:false,webkit:false,name:null,version:0,quirks:false};if(document.all&&!navigator.userAgent.match(/opera/i)&&!navigator.appVersion.match(/mac/i)){a.ie=true;a.name="ie";a.version=parseFloat(navigator.appVersion.substr(navigator.appVersion.indexOf("MSIE ")+5,3));(function(){try{var c=new ActiveXObject("MSXML2.XSLTemplate")}catch(d){a.ie=false}})()}else{if(typeof window.XSLTProcessor!="undefined"){if(window.controllers&&parseInt(navigator.productSub,10)>20031001){a.gecko=true;a.name="gecko";a.version=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf("rv:")+3,4))}else{if(navigator.userAgent.match(/opera/i)){a.opera=true;a.name="opera";a.version=parseFloat(navigator.userAgent.substr(navigator.userAgent.indexOf(/opera[ \/]/i)+7,5))}else{if(navigator.userAgent.match(/applewebkit/i)){a.webkit=true;a.name="webkit";a.version=parseFloat(navigator.userAgent.match(/applewebkit\/([0-9\.]+)/i)[1]);a.air=navigator.userAgent.match(/AdobeAIR/)&&!!window.runtime}}}}}if(a.ie&&a.version<7){try{document.execCommand("BackgroundImageCache",false,true)}catch(b){}}return a})();(function(){var v=b$.browser;var k=["toString","hasOwnProperty","toLocaleString","isPrototypeOf","valueOf","constructor","propertyIsEnumerable"];var i=Object.prototype.hasOwnProperty;function t(z,y,A,C){y=y||function(){z.apply(this,arguments)};o(y,z);if(C){o(y,C)}var B=new Function;B.prototype=z.prototype;y.prototype=o(new B,A);y.prototype.constructor=y;y.superClass=z;return y}function o(B,y){var z="";if(y){for(z in y){if(i.call(y,z)){B[z]=y[z]}}if(v.ie&&v.version<9){for(var A=0;A<k.length;++A){z=k[A];if(i.call(y,z)){B[z]=y[z]}}}}return B}var r=function(){};r.superClass=null;r.classID=0;var q=1;r.extend=function(y,A,B){var z=t(this,y,A,B);z.classID=q++;return z};r.getClassID=function(){return this.classID};r.prototype.toString=function(){return m(this)||"b$.Class"};var j=r.extend(function(y){this.message=y});j.prototype.toString=function(){return this.message};var p=r.extend(function(){});p.prototype.test=function(y){return true};var s=p.extend(function(y){this.test=y});var u=p.extend(function(y){this.type=y});u.prototype.test=function(y){if(this.type instanceof p){return this.type.test(y)}return y instanceof this.type};var e=u.extend(function(y){u.call(this,y)});e.prototype.test=function(y){return y===null||u.prototype.test.call(this,y)};var f=u.extend(function(y){u.call(this,y)});f.prototype.test=function(y){return y==undefined||u.prototype.test.call(this,y)};var d=p.extend(function(y){this.pattern=y});d.prototype.test=function(z){if(!z){return false}for(var y in this.pattern){if(!l(z[y],this.pattern[y])){return false}}return true};d.prototype.extend=function(z){for(var y in this.pattern){if(!(y in z)){z[y]=this.pattern[y]}}return new d(z)};d.prototype.implementedBy=function(y){if(!this.test(y.prototype)){throw new Error("Interface not implemented by class.")}};function l(y,z){if(z instanceof p){return z.test(y)}if(z instanceof Function){return y instanceof z}throw new Error("Wrong type passed to checkType().")}function a(B,A){for(var z=0,y=A.length;z<y;z++){if(!l(B[z],A[z])){throw new c(null,B,z,A[z])}}}var c=j.extend(function(y,B,z,A){this.message=y;this.arguments=B;this.index=z;this.expected=A});c.prototype.toString=function(){return"ArgumentException - Wrong argument type for argument "+this.index+" ("+this.arguments[this.index]+") in "+this.arguments.callee+"."+(this.message?" ("+this.message+")":"")};var x=r.extend(function(z,y){this.name=z;this.initializer=y;this.object=null});x.prototype.create=function(){var y=this.getNamespace();this.initializer.call(y);return y};x.prototype.getNamespace=function(){if(this.object){return this.object}var A=window;var y=this.name.split(".");if(y.length==1&&y[0]==""){return A}for(var z=0;z<y.length;z++){if(!(y[z] in A)){A=A[y[z]]={}}else{A=A[y[z]]}}x.namespaces[this.name]=A;return this.object=A};x.namespaces={"b$":b$};function b(A,y){var z=new x(A,y);return z.create()}function g(C){var B=window;var y=C.split(".");if(y.length==1&&y[0]==""){return B}for(var A=0;A<y.length;A++){if(y[A] in B){B=B[y[A]]}else{var E=new Error('Cannot find object "'+C+'".');if(E.stack){var z=E.stack&&E.stack.split("\n")[2];var D=z&&z.match(/^[^@]*@(.*):(\d+)$/);if(D&&D[1]&&D[2]){E=new Error(E.message,D[1],Number(D[2]))}}throw E}}return B}function w(z){for(var B in x.namespaces){if(x.namespaces.hasOwnProperty(B)){var A=x.namespaces[B];for(var y in A){if(z==A[y]){return B+"."+y}}}}return null}function m(A){if(!A.constructor){throw new c("Instance object expected.",arguments,0,null)}var C=A.constructor;var z=null;var F=null;for(var E in x.namespaces){if(x.namespaces.hasOwnProperty(E)){var B=x.namespaces[E];for(var y in B){if(B.hasOwnProperty(y)){var D=B[y];if(C==D){return E+"."+y}else{if(D instanceof Function&&A instanceof D&&(!F||D.prototype instanceof F)){z=E+"."+y+" (subclass)";F=D}}}}}}return z}var n=r.extend(function(){throw new Error("Must implement.")});n.prototype.next=function(){throw new Error("Must implement.")};n.prototype.hasNext=function(){throw new Error("Must implement.")};n.prototype.forEach=function(z,y){while(this.hasNext()){z.call(y||this,this.next())}};var h=n.extend(function(y){this.array=y;this.index=0});h.prototype.next=function(){return this.array[this.index++]};h.prototype.hasNext=function(){return this.index<this.array.length};b$.extend=t;b$.mixin=o;b$.Class=r;b$.Exception=j;b$.TypeConstraint=p;b$.TypeConstraintFn=s;b$.TypeConstraintObject=u;b$.TypeConstraintNull=e;b$.TypeConstraintOptional=f;b$.Interface=d;b$.checkType=l;b$.testArguments=a;b$.ArgumentException=c;b$.Module=x;b$.module=b;b$.require=g;b$.findExport=w;b$.findExportClass=m;b$.Iterator=n;b$.ArrayIterator=h})();b$.module("b$.types",function(){var i=b$.require("b$.TypeConstraintFn");var h=b$.browser.ie;var b=new i(function(m){return true});var e=new i(function(m){return typeof m=="number"||m instanceof Number});var g=new i(function(m){return typeof m=="string"||m instanceof String});var f=new i(function(m){return typeof m=="boolean"||m instanceof Boolean});var l=new i(function(m){return typeof m=="function"});var d=new i(function(m){if(!h){return m instanceof Node}else{return !!m&&"nodeType" in m&&"ownerDocument" in m&&"parentNode" in m&&"nodeName" in m&&"nodeValue" in m&&"nextSibling" in m&&"previousSibling" in m}});var k=new i(function(m){if(!h){return m instanceof Element}else{if(window.Element&&!(m&&"selectNodes" in m)){return !!m&&m instanceof Element}else{return d.test(m)&&m.nodeType==1}}});var j=new i(function(m){if(!h){return m instanceof Document}else{if(window.HTMLDocument&&!(m&&"selectNodes" in m)){return !!m&&m instanceof HTMLDocument&&m.nodeType==9}else{return d.test(m)&&m.nodeType==9}}});var c=new i(function(m){if(!h){return m instanceof HTMLElement}else{if(window.Element&&window.HTMLDocument){return !!m&&m instanceof Element&&!!m.ownerDocument&&m.ownerDocument instanceof HTMLDocument}else{return d.test(m)&&m.nodeType==1&&!("baseName" in m)}}});var a=new i(function(m){if(!h){return m instanceof HTMLDocument}else{if(window.HTMLDocument){return !!m&&m instanceof HTMLDocument&&m.nodeType==9}else{return d.test(m)&&m.nodeType==9&&!("baseName" in m)}}});this.ANY=b;this.NUMBER=e;this.STRING=g;this.BOOLEAN=f;this.FUNCTION=l;this.NODE=d;this.ELEMENT=k;this.DOCUMENT=j;this.HTMLELEMENT=c;this.HTMLDOCUMENT=a});b$.module("b$.bom",function(){var b=b$.require("b$.browser.gecko");var p=b$.require("b$.browser.ie");var j=9;function c(s){var q=document.createElement("div"),r=null;if(!s){return null}s=s.replace(/^\w|\w$/g,"");var t=s.match(/^<([a-z0-9]+)/i);if(!t){return null}switch(t[1]){case"tbody":case"thead":case"tfoot":q.innerHTML="<table>"+s+"</table>";r=q.firstChild.firstChild;break;case"tr":q.innerHTML="<table><tbody>"+s+"</tbody></table>";r=q.firstChild.firstChild.firstChild;break;case"td":case"th":q.innerHTML="<table><tbody><tr>"+s+"</tr></tbody></table>";r=q.firstChild.firstChild.firstChild.firstChild;break;case"option":q.innerHTML="<select>"+s+"</select>";r=q.firstChild.firstChild;break;default:q.innerHTML="&nbsp;"+s;r=q.childNodes[1];break}return r.parentNode.removeChild(r)}var e=window.DOMParser;if(!e){e=function(){this.baseURI=null};e.prototype.parseFromString=function(s,q){var r=new ActiveXObject("Microsoft.XMLDOM");try{r.setProperty("SelectionLanguage","XPath")}catch(t){}r.async=false;r.preserveWhiteSpace=true;r.validateOnParse=false;r.resolveExternals=false;r.loadXML(s);return r}}var o=window.XMLSerializer;if(!o){o=function(){};o.prototype.serializeToString=function(q){return q.nodeType==9?q.xml.replace(/\s+$/g,""):q.xml}}var k=window.XSLTProcessor;if(!k){k=function(){this._template=new ActiveXObject("MSXML2.XSLTemplate");this._outputMethod="xml";this._parameters={}};k.prototype.importStylesheet=function(s){var q=new ActiveXObject("MSXML2.FreeThreadedDOMDocument");q.async=false;if(s.nodeType==j&&s.url){s.setProperty("SelectionLanguage","XPath");s.setProperty("SelectionNamespaces",'xmlns:xsl="http://www.w3.org/1999/XSL/Transform"');if(s.selectSingleNode("//xsl:*[local-name() = 'include' or local-name() = 'import']")!==null){q.load(s.url)}else{q.loadXML(s.xml)}}else{q.loadXML(s.xml)}q.setProperty("SelectionNamespaces",'xmlns:xsl="http://www.w3.org/1999/XSL/Transform"');var r=q.selectSingleNode("//xsl:output");this._outputMethod=r?r.getAttribute("method"):"html";this._template.stylesheet=q;this.clearParameters()};k.prototype._transformToString=function(t){var s=this._template.createProcessor();for(var q in this._parameters){for(var r in this._parameters[q]){if(q){s.addParameter(r,this._parameters[q][r],q)}else{s.addParameter(r,this._parameters[q][r])}}}s.input=t;s.output=null;s.transform();return s.output};k.prototype.transformToDocument=function(t){var r=this._transformToString(t),s=this._outputMethod,q=null;if(s=="text"){return new e().parseFromString("<transformation>"+r+"</transformation>","text/xml")}else{if(s=="xhtml"||s=="html"){throw new Error("Feature is not supported!")}else{if(s=="xml"){return new e().parseFromString(r,"text/xml")}}}};k.prototype.transformToFragment=function(u,v){var r=this._transformToString(u),t=this._outputMethod,s=v.createDocumentFragment(),q=null;if(t=="text"){s.appendChild(v.createTextNode(r))}else{if(t=="xhtml"||t=="html"||t=="xml"){if(t=="xml"){q=new e().parseFromString("<root>"+r.replace(/\w*<\?xml[^\?]*\?>/g,"")+"</root>","text/xml").documentElement}else{q=c("<div>"+r+"</div>")}while(q.firstChild){s.appendChild(q.firstChild)}}}return s};k.prototype.setParameter=function(q,s,r){q=q||"";if(!this._parameters[q]){this._parameters[q]={}}this._parameters[q][s]=r};k.prototype.getParameter=function(r,s){var q=this._parameters[r||""];return q&&q[s]||null};k.prototype.removeParameter=function(r,s){var q=this._parameters[r||""];if(q&&q.hasOwnProperty(s)){delete q[s]}};k.prototype.clearParameters=function(){this._parameters={}};k.prototype.reset=function(){this.clearParameters();this._template=new ActiveXObject("MSXML2.XSLTemplate")}}var d;if(window.XMLHttpRequest&&(!p||(p&&String(location.href).indexOf("file")!=0))){d=window.XMLHttpRequest}else{d=function(){return new ActiveXObject("Microsoft.XMLHTTP")}}var n=0;var i=1;var g=2;var l=3;var h=4;var m=function(){this._object=new d();this._sendInvoked=false;if(this._object.wrapped){this.wrapped=this._object.wrapped}this.readyState=n;this.responseText="";this.responseXML=null;this.status=0;this.statusText="";this.onreadystatechange=null;this._handleUnloadForIE=null};m.prototype.open=function(z,s,u,B,w){if(u===undefined){u=true}if(String(s).indexOf("wsrp-urlType")!=-1){s=String(s);var A=s.indexOf("wsrp-url=")+9;var t=s.substr(A).split("&");var C=decodeURIComponent(t[0]);var v=s.substr(s.indexOf("?")+1).split("&");var y=[];for(var x=0;x<v.length;x++){if(v[x].indexOf("wsrp")!==0&&v[x]){y.push(v[x])}}t[0]=encodeURIComponent(C+(C.indexOf("?")<0?"?":"&")+y.join("&"));s=s.substr(0,A)+t.join("&")}this._headers=[];this._async=u;this._sendInvoked=false;this._aborted=false;var r=this;var q=this.readyState;if(p&&u){this._handleUnloadForIE=function(){if(r._object.readyState!=h){r.abort()}};window.attachEvent("onunload",this._handleUnloadForIE)}this._object.onreadystatechange=function(){r._handleReadystatechange()};if(arguments.length>4){this._object.open(z,s,u,B,w)}else{if(arguments.length>3){this._object.open(z,s,u,B)}else{this._object.open(z,s,u)}}if(!u&&b){this.readyState=i;a(this)}};m.prototype.send=function(q){if(q&&q.nodeType){if(!this._headers["Content-Type"]){this.setRequestHeader("Content-Type","application/xml")}q=new o().serializeToString(q)}if(this._async){this._sendInvoked=true}this._object.send(q);if(b&&!this._async){this.readyState=g;a(this);this.readyState=l;a(this);this.readyState=h;this.status=this._object.status;this.statusText=this._object.statusText;this.responseText=this._object.responseText;this.responseXML=this._object.responseXML;a(this)}};m.prototype.abort=function(){this._aborted=true;this._object.abort();this.responseText="";this.responseXML=null;this.status=0;this.statusText="";this._headers=[];if(!(this.readyState==n||(this.readyState==i&&!this._sendInvoked)||this.readyState==h)){this.readyState=h;this._sendInvoked=false;if(this.onreadystatechange instanceof Function){this.onreadystatechange.apply(this)}}this.readyState=n;f(this)};m.prototype.getAllResponseHeaders=function(){if(b){return this._object.getAllResponseHeaders().replace(/\r\n/g,"\n").replace(/\n/g,"\r\n")}else{return this._object.getAllResponseHeaders()}};m.prototype.getResponseHeader=function(q){return this._object.getResponseHeader(q)};m.prototype.setRequestHeader=function(q,r){this._headers[q]=r;return this._object.setRequestHeader(q,r)};m.prototype._handleReadystatechange=function(){if(b&&!this._async){return}if(this._aborted){return}var q=this.readyState;this.readyState=this._object.readyState;if(this.readyState==h){this.status=this._object.status;this.statusText=this.status?this._object.statusText:"";this.responseText=this._object.responseText;this.responseXML=this._object.responseXML;if(p&&this.status==1223){this.status=204}f(this);if(p&&this.responseXML&&!this.responseXML.documentElement&&this.getResponseHeader("Content-Type").match(/[^\/]+\/[^\+]+\+xml/)){this.responseXML=new e().parseFromString(this.responseText,"text/xml")}if(p&&this._async){window.detachEvent("onunload",this._handleUnloadForIE);this._handleUnloadForIE=null}}if(q!=this.readyState){a(this)}q=this.readyState};function a(q){if(q.onreadystatechange){if(q._async&&q.readyState==h){setTimeout(function(){q.onreadystatechange.apply(q)},0)}else{q.onreadystatechange.apply(q)}}}function f(q){if(p){q._object.onreadystatechange=new window.Function()}delete q._headers}window.DOMParser=this.DOMParser=e;window.XMLSerializer=this.XMLSerializer=o;window.XSLTProcessor=this.XSLTProcessor=k;window.XMLHttpRequest=this.XMLHttpRequest=m});b$.module("b$.ecma5",function(){var Array=b$.require("Array");if(!Array.prototype.indexOf){Array.prototype.indexOf=function(oItem,iFromIndex){iFromIndex=arguments.length<2?0:toInteger(iFromIndex);if(iFromIndex<0){iFromIndex=Math.max(this.length-iFromIndex,0)}for(var iIndex=iFromIndex,iLength=this.length;iIndex<iLength;iIndex++){if(this[iIndex]===oItem){return iIndex}}return -1}}if(!Array.prototype.lastIndexOf){Array.prototype.lastIndexOf=function(oItem,iFromIndex){iFromIndex=arguments.length<2?this.length:toInteger(iFromIndex);if(iFromIndex<0){iFromIndex=this.length-iFromIndex}iFromIndex=Math.min(iFromIndex,this.length-1);for(var iIndex=iFromIndex;iIndex>=0;iIndex--){if(this[iIndex]===oItem){return iIndex}}return -1}}if(!Array.prototype.every){Array.prototype.every=function(fFunction,oThisArg){if(!(fFunction instanceof Function)){throw new TypeError()}for(var iIndex=0,iLength=this.length;iIndex<iLength;iIndex++){if(this.hasOwnProperty(iIndex)){if(!fFunction.call(oThisArg,this[iIndex],iIndex,this)){return false}}}return true}}if(!Array.prototype.some){Array.prototype.some=function(fFunction,oThisArg){if(!(fFunction instanceof Function)){throw new TypeError()}for(var iIndex=0,iLength=this.length;iIndex<iLength;iIndex++){if(this.hasOwnProperty(iIndex)){if(fFunction.call(oThisArg,this[iIndex],iIndex,this)){return true}}}return false}}if(!Array.prototype.forEach){Array.prototype.forEach=function(fFunction,oThisArg){if(!(fFunction instanceof Function)){throw new TypeError()}for(var iIndex=0,iLength=this.length;iIndex<iLength;iIndex++){if(this.hasOwnProperty(String(iIndex))){fFunction.call(oThisArg,this[iIndex],iIndex,this)}}}}if(!Array.prototype.map){Array.prototype.map=function(fFunction,oThisArg){if(!(fFunction instanceof Function)){throw new TypeError()}var aNewArray=[];for(var iIndex=0,iLength=this.length;iIndex<iLength;iIndex++){aNewArray.push(fFunction.call(oThisArg,this[iIndex],iIndex,this))}return aNewArray}}if(!Array.prototype.filter){Array.prototype.filter=function(fFunction,oThisArg){if(!(fFunction instanceof Function)){throw new TypeError()}var oNewArray=[];for(var iIndex=0,iLength=this.length;iIndex<iLength;iIndex++){if(fFunction.call(oThisArg,this[iIndex],iIndex,this)){oNewArray.push(this[iIndex])}}return oNewArray}}if(!Array.prototype.reduce){Array.prototype.reduce=function(fFunction,vInitialValue){if((this.length==0&&vInitialValue===undefined)||!(fFunction instanceof Function)){throw new TypeError()}var bIsInitialValueEmpty=arguments.length<2;for(var iIndex=0,iLength=this.length;iIndex<iLength;iIndex++){if(bIsInitialValueEmpty){vInitialValue=this[iIndex];bIsInitialValueEmpty=false}else{vInitialValue=fFunction(vInitialValue,this[iIndex],iIndex,this)}}return vInitialValue}}if(!Array.prototype.reduceRight){Array.prototype.reduceRight=function(fFunction,vInitialValue){if(this.length==0||!(fFunction instanceof Function)){throw new TypeError()}var bIsInitialValueEmpty=arguments.length<2;for(var iIndex=this.length-1;iIndex>=0;iIndex--){if(bIsInitialValueEmpty){vInitialValue=this[iIndex];bIsInitialValueEmpty=false}else{vInitialValue=fFunction(vInitialValue,this[iIndex],iIndex,this)}}return vInitialValue}}function toInteger(vValue){var number=Number(vValue);return isNaN(number)?0:number>0?Math.floor(number):Math.ceil(number)}function fFormaNumber(iNumber){return iNumber<10?"0"+iNumber:String(iNumber)}if(typeof Date.prototype.toJSON!=="function"){Date.prototype.toJSON=function(sKey){return this.getUTCFullYear()+"-"+fFormaNumber(this.getUTCMonth()+1)+"-"+fFormaNumber(this.getUTCDate())+"T"+fFormaNumber(this.getUTCHours())+":"+fFormaNumber(this.getUTCMinutes())+":"+fFormaNumber(this.getUTCSeconds())+"Z"}}if(typeof String.prototype.toJSON!=="function"){String.prototype.toJSON=function(sKey){return this.valueOf()}}if(typeof Number.prototype.toJSON!=="function"){Number.prototype.toJSON=function(sKey){return this.valueOf()}}if(typeof Boolean.prototype.toJSON!=="function"){Boolean.prototype.toJSON=function(sKey){return this.valueOf()}}var JSON_STRING_ESCAPE_CHARS_REEGEXP=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;var JSON_STRING_ESCAPE_CHARS_MAPPINGS={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"};function fQuoteString(sString){JSON_STRING_ESCAPE_CHARS_REEGEXP.lastIndex=0;return JSON_STRING_ESCAPE_CHARS_REEGEXP.test(sString)?'"'+sString.replace(JSON_STRING_ESCAPE_CHARS_REEGEXP,function(sToEscpe){var sEscaped=JSON_STRING_ESCAPE_CHARS_MAPPINGS[sToEscpe];return typeof sEscaped==="string"?sEscaped:"\\u"+("0000"+sToEscpe.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+sString+'"'}var sGap="";var sIndent="";var vGlobalReplacer={};function fStignifyJSONValue(sKey,oHolder){var sValue=null,iLength=0,sMind=sGap,aPartial=[],vValue=oHolder[sKey];if(vValue&&typeof vValue==="object"&&typeof vValue.toJSON==="function"){vValue=vValue.toJSON(sKey)}if(typeof vGlobalReplacer==="function"){vValue=vGlobalReplacer.call(oHolder,sKey,vValue)}switch(typeof vValue){case"string":return fQuoteString(vValue);case"number":return isFinite(vValue)?String(vValue):"null";case"boolean":case"null":return String(vValue);case"object":if(!vValue){return"null"}sGap+=sIndent;if(Object.prototype.toString.apply(vValue)==="[object Array]"){iLength=vValue.length;for(var iItem=0;iItem<iLength;iItem+=1){aPartial[iItem]=fStignifyJSONValue(iItem,vValue)||"null"}sValue=aPartial.length===0?"[]":sGap?"[\n"+sGap+aPartial.join(",\n"+sGap)+"\n"+sMind+"]":"["+aPartial.join(",")+"]";sGap=sMind;return sValue}if(vGlobalReplacer&&typeof vGlobalReplacer==="object"){iLength=vGlobalReplacer.length;for(var iItem=0;iItem<iLength;iItem+=1){var sPropertyName=vGlobalReplacer[iItem];if(typeof sPropertyName==="string"){sValue=fStignifyJSONValue(sPropertyName,vValue);if(sValue){aPartial.push(fQuoteString(sPropertyName)+(sGap?": ":":")+sValue)}}}}else{for(var sPropertyName in vValue){if(Object.hasOwnProperty.call(vValue,sPropertyName)){sValue=fStignifyJSONValue(sPropertyName,vValue);if(sValue){aPartial.push(fQuoteString(sPropertyName)+(sGap?": ":":")+sValue)}}}}sValue=aPartial.length===0?"{}":sGap?"{\n"+sGap+aPartial.join(",\n"+sGap)+"\n"+sMind+"}":"{"+aPartial.join(",")+"}";sGap=sMind;return sValue}}if(!window.JSON){window.JSON={}}if(typeof JSON.stringify!=="function"){JSON.stringify=function(vValue,vReplacer,vSpace){sGap="";sIndent="";if(typeof vSpace==="number"){for(var iIndentCount=0;iIndentCount<vSpace;iIndentCount+=1){sIndent+=" "}}else{if(typeof vSpace==="string"){sIndent=vSpace}}vGlobalReplacer=vReplacer;if(vReplacer&&typeof vReplacer!=="function"&&(typeof vReplacer!=="object"||typeof vReplacer.length!=="number")){throw new Error("JSON.stringify")}return fStignifyJSONValue("",{"":vValue})}}if(typeof JSON.parse!=="function"){var BROKEN_UNICODE_CHAR_REGEXP=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;JSON.parse=function(sText,fReviver){function fWalk(oHolder,sKey){var vPropertyValue=null,vValue=oHolder[sKey];if(vValue&&typeof vValue==="object"){for(var sPropertyName in vValue){if(Object.hasOwnProperty.call(vValue,sPropertyName)){vPropertyValue=fWalk(vValue,sPropertyName);if(vPropertyValue!==undefined){vValue[sPropertyName]=vPropertyValue}else{delete vValue[sPropertyName]}}}}return fReviver.call(oHolder,sKey,vValue)}BROKEN_UNICODE_CHAR_REGEXP.lastIndex=0;if(BROKEN_UNICODE_CHAR_REGEXP.test(sText)){sText=sText.replace(BROKEN_UNICODE_CHAR_REGEXP,function(sChar){return"\\u"+("0000"+sChar.charCodeAt(0).toString(16)).slice(-4)})}if(/^[\],:{}\s]*$/.test(sText.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,""))){var oParsedObject=eval("("+sText+")");return typeof fReviver==="function"?fWalk({"":oParsedObject},""):oParsedObject}throw new SyntaxError("JSON.parse")}}this.Array=Array;this.JSON=JSON});b$.module("b$.mvc",function(){var a=b$.require("b$.Class");var i=b$.require("b$.Interface");var y=b$.require("b$.Exception");var m=b$.require("b$.TypeConstraintOptional");var f=b$.require("b$.testArguments");var J=b$.require("b$.types.STRING");var b=b$.require("b$.types.FUNCTION");var c=b$.require("b$.types.ANY");var A=b$.require("b$.ArgumentException");var K=b$.require("b$.Iterator");var p=b$.require("b$.ArrayIterator");var r=b$.require("b$.ecma5.Array.prototype.indexOf");var D={};var B=Array.prototype,g=Object.prototype,q=Function.prototype;var n=B.slice,z=B.unshift,e=g.toString,h=g.hasOwnProperty;var Q=B.forEach;var I=function(W,V,U){if(W==null){return}if(Q&&W.forEach===Q){W.forEach(V,U)}else{if(P(W.length)){for(var T=0,R=W.length;T<R;T++){if(V.call(U,W[T],T,W)===D){return}}}else{for(var S in W){if(h.call(W,S)){if(V.call(U,W[S],S,W)===D){return}}}}}};var P=function(R){return !!(R===0||(R&&R.toExponential&&R.toFixed))};this.each=I;this.mixin=function(S,T,R){var U;if(S){for(U in T){if(R||S[U]===undefined){S[U]=config[T]}}}return S};var C=a.extend(function(R){a.call(this);this.array=[];this.keys=[];this.map={};if(R){this.keyFn=R}},{keyFn:function(R){return R.id},add:function(S,T){var U=this,R;if(arguments.length==1){T=S;S=U.keyFn(T)}if(typeof S!="undefined"&&S!==null){R=U.map[S];if(typeof R!="undefined"){return U.replace(S,T)}U.map[S]=T}U.array.push(T);U.keys.push(S);$(U).triggerHandler("add",[U.array.length-1,T,S]);return T},addAll:function(W){var V=this,U=0,S,R,T;if(arguments.length>1||$.isArray(W)){S=arguments.length>1?arguments:W;for(R=S.length;U<R;U++){V.add(S[U])}}else{for(T in W){if(W.hasOwnProperty(T)){V.add(T,W[T])}}}},insertAt:function(R,S,T){var U=this;if(arguments.length==2){T=S;S=U.keyFn(T)}if(typeof U.map[S]!="undefined"){U.suspendEvents();U.removeByKey(S);U.resumeEvents()}if(R>=U.array.length){return U.add(S,T)}U.array.splice(R,0,T);if(typeof S!="undefined"&&S!==null){U.map[S]=T}U.keys.splice(R,0,S);return T},remove:function(R){return this.removeAt(this.array.indexOf(R))},removeByKey:function(R){return this.removeAt(this.keys.indexOf(R))},removeAll:function(R){},removeAt:function(R){var U=this,T,S;if(R<U.array.length&&R>=0){T=U.array[R];U.array.splice(R,1);S=U.keys[R];if(typeof S!="undefined"){delete U.map[S]}U.keys.splice(R,1);return T}return false},replace:function(T,U){var R,S;if(arguments.length==1){U=arguments[0];T=this.keyFn(R)}R=this.map[T];if(typeof T=="undefined"||T===null||typeof R=="undefined"){return this.add(T,U)}S=this.indexOfKey(T);this.array[S]=U;this.map[T]=U;return U},get:function(R){var S=this.map[R],S=S!==undefined?S:(typeof R=="number")?this.array[R]:undefined;return S},getAt:function(R){return this.array[R]},indexOf:function(R){return r.call(this.array,R)},indexOfKey:function(R){return r.call(this.keys,R)},each:function(U,T){var W=[].concat(this.array),S=0,R=W.length,V;for(;S<R;S++){V=W[S];if(U.call(T||V,V,S,R)===false){break}}},clear:function(){this.array=[];this.keys=[];this.map={}}});this.HashMap=C;var E=this.Event=a.extend(function(){this.bubbles=false;this.cancelable=false;this.currentTarget=null;this.eventPhase=E.CAPTURING_PHASE;this.target=null;this.timeStamp=(new Date()).getTime();this.type="";this.namespaceURI=null;this.defaultPrevented=false;this._captures=null;this._stopped=false;this._stoppedImmediate=false;this._stoppedHorizontal=false},{initEvent:function(T,S,R){this.type=T;this.bubbles=S;this.cancelable=R},initEventNS:function(S,U,T,R){this.initEvent(U,T,R);this.namespaceURI=S},preventDefault:function(){this.defaultPrevented=this.cancelable},stopPropagation:function(){this._stopped=true},stopImmediatePropagation:function(){this.stopPropagation();this.stopHorizontalPropagation();this._stoppedImmediate=true},stopHorizontalPropagation:function(){this._stoppedHorizontal=true},isPropagationStopped:function(){return this._stopped},isImmediatePropagationStopped:function(){return this._stoppedImmediate},isHorizontalPropagationStopped:function(){return this._stoppedHorizontal}});E.CAPTURING_PHASE=1;E.AT_TARGET=2;E.BUBBLING_PHASE=3;E.LISTENER_ENTRY=0;var L=this.CustomEvent=E.extend(function(){this.detail=0;E.call(this)},{initCustomEvent:function(U,T,R,S){this.initEvent(U,T,R);this.detail=S},initCustomEventNS:function(S,V,U,R,T){this.initCustomEvent(V,U,R);this.namespaceURI=S}});var k=this.MutationEvent=E.extend(function(){this.relatedNode=null;this.prevValue="";this.newValue="";this.attrName="";this.attrChange=0;E.call(this)});k.MODIFICATION=1;k.ADDITION=2;k.REMOVAL=3;k.prototype.initMutationEvent=function(Y,X,V,U,T,W,R,S){this.initEvent(Y,X,V);this.relatedNode=U;this.prevValue=T;this.newValue=W;this.attrName=R;this.attrChange=S};k.prototype.initMutationEventNS=function(Y,R,V,X,W,S,Z,T,U){this.initMutationEvent(R,V,X,W,S,Z,T,U);this.namespaceURI=Y};var G=this.ObservedEvent=a.extend(function(R,S){this.type=R;this.observable=S;this.observers=[]},{addObserver:function(U,T,S){var V=this,R;T=T||this.observable;if(!this.isObserving(U,T)){R=this.createObserver(U,T,S);this.observers.push(R)}return R},createObserver:function(U,T,S){S=S||{};T=T||this.observable;var R={oe:this,fn:U,fnenv:U,context:T,options:S};return R},findObserver:function(U,T){var V=this.observers,S=V.length,R,W;while(S--){R=V[S];if(R){W=R.context;if(R.fn==U&&(W==T||W==this.observable)){return S}}}return -1},isObserving:function(S,R){return this.findObserver(S,R)!==-1},removeObserver:function(W,V){var U=this,S,T,R;T=U.findObserver(W,V);if(T!=-1){U.observers.splice(T,1);return true}return false},clearObservers:function(){var S=this.observers,R=S.length;while(R--){this.removeObserver(S[R].fn,S[R].context)}},dispatch:function(){var V=this,W=V.observers.slice(0),U=W.length,T,S,R;if(U>0){V.dispatching=true;for(T=0;T<U;T++){R=W[T];S=arguments.length?n.call(arguments,0):[];if(R&&R.options){S.push(R.options)}if(R&&R.fnenv.apply(R.context||V.observable,S)===false){return(V.dispatching=false)}}}V.dispatching=false;return true}});var d=(this.Observable=a.extend(function(){this.events={}}));d.prototype.addObserver=function(V,U,T,S){f(arguments,[J,b]);var R=this.events[V];if(!R){R=new G(V,this);this.events[V]=R}return R.addObserver(U,T,S)};d.prototype.removeObserver=function(U,T,S){f(arguments,[J,b]);var R=this.events[U];if(R){R.removeObserver(T,S)}};d.prototype.removeAllObservers=function(S){var R=this.events,T,U;if(S){if(R[S]){R[S].clearObservers()}}else{for(U in R){if(R.hasOwnProperty(U)){R[U].clearObservers()}}}};d.prototype.notifyObservers=function(U){var W;var S=n.call(arguments,0);if(this.eventsMuted===true){if(this.eventQueue){this.eventQueue.push(S)}return false}if(U instanceof E){W=U;U=W.type;if(!W.target){W.target=this;W.currentTarget=this}}else{S.shift()}var X=this.events[U];if(X){S.push(X);X.target=this;X.currentTarget=this}var T=this.events["*"];if(W instanceof E&&W.bubbles){if(X&&X.dispatch.apply(X,S)===false){return false}if(T&&T.dispatch.apply(T,[U,this])===false){return false}var V=this.getBubbleParent&&this.getBubbleParent();if(V&&V.notifyObservers){W.currentTarget=V;V.notifyObservers.apply(V,S)}else{return true}}else{var R=(X)?X.dispatch.apply(X,S):true;if(R){return(T)?T.dispatch.apply(T,[U,this]):true}return false}};d.prototype.hasObservers=function(S){f(arguments,[J]);var R=this.events[S];return(R&&R.observers.length>0)===true};d.prototype.muteEvents=function(R){this.eventsMuted=true;if(R&&!this.eventQueue){this.eventQueue=[]}};d.prototype.unmuteEvents=function(){var S=this,R=this.eventQueue||[];this.eventsMuted=false;delete this.eventQueue;I(R,function(T){S.notifyObservers.apply(S,T)})};this.Observable=d;var H=d.extend(function(){d.call(this)},{});this.Model=H;var w=y.extend(function(S,R){f(arguments,[c,t]);y.call(this,"Can't find the view to instantiate for the model.");this.model=S;this.factory=R});var t=new i({createView:Function});var u=new i({getViewClass:Function});var x=new m(t);var j=new m(u);var M=a.extend(function(S,R){f(arguments,[c,x]);this.model=S;this.factory=R||null;this.html=null});M.prototype.getModel=function(){return this.model};M.prototype.getFactory=function(){return this.factory};M.prototype.registerObservers=function(){if(this.model instanceof H){this.model.addObserver("*",this.update,this)}};M.prototype.unregisterObservers=function(){if(this.model instanceof H){this.model.removeObserver("*",this.update,this)}};M.prototype.createHTML=function(R){throw new Error("Must implement createHTML().")};M.prototype.renderHTML=function(S,R){console&&console.log&&console.log("should implement renderHTML: ",this);S.replaceWith(this.getHTML(R))};M.prototype.getHTML=function(R){if(!this.html){this.html=this.createHTML(R);this.registerObservers()}else{if(this.html.ownerDocument!=R){throw new Error("HTML document mismatch with existing view.")}}return this.html};M.prototype.release=function(){if(jQuery(this.html).find("#"+(this.model.item&&this.model.item.id)).length==0){if(this.html&&this.html.id!==(this.model.item&&this.model.item.id)){this.unregisterObservers();if(this.html.parentNode){this.html.parentNode.removeChild(this.html)}this.html=null}}};M.prototype.update=function(S,R){if(!this.html){throw new Error("Unexpected call to update(), no HTML exists.")}var T=this.html;this.html=this.createHTML(T.ownerDocument);if(T.parentNode){T.parentNode.replaceChild(this.html,T)}};M.prototype.reflow=function(){};M.prototype.attachHandlerTo=function(R,U,T){var S=this;if(R.addEventListener){R.addEventListener(U,function(V){return T.call(S,V)},false)}else{R.attachEvent("on"+U,function(){return T.call(S,event)})}};var v=a.extend(function(R){f(arguments,[t]);this.factory=R;this.views=[]});v.prototype.getViews=function(){return new p(this.views)};v.prototype.updateViews=function(T){if(!(T instanceof K)){throw new A("Iterator expected. Did you mean to invoke updateView()?",arguments,0,null)}var S=0;var R=[];for(var U;U=T.next();S++){if(this.views[S]){if(this.views[S].getModel()==U){R.push(this.views[S])}else{if(this.views[S-1]&&this.views[S-1].getModel()==U){R.push(this.views[S-1])}else{if(this.views[S+1]&&this.views[S+1].getModel()==U){R.push(this.views[S+1])}else{this.views[S].release();R.push(this.factory.createView(U))}}}}else{R.push(this.factory.createView(U))}}for(;S<this.views.length;S++){this.views[S].release()}this.views=R};v.prototype.updateView=function(S){if(S instanceof K){throw new A("Model expected. Did you mean to invoke updateViews()?",arguments,0,null)}if(S){if(this.views[0]){if(this.views[0].getModel()!=S){this.views[0].release();this.views[0]=this.factory.createView(S)}}else{this.views[0]=this.factory.createView(S)}}for(var R=S?1:0;R<this.views.length;R++){this.views[R].release()}this.views.length=S?1:0;return this.views[0]||null};v.prototype.render=function(S,Z,R){var W=S.ownerDocument;var X=S.childNodes;var T=0;if(Z){while(X[T++]!=Z){if(!X[T-1]){throw new Error("The node to insert after is not a child of the element.")}}}for(var U,V=0;U=this.views[V];V++){var Y=U.getHTML(W);if(X[T]!=Y){if(X[T+1]==Y&&X[T]!=R){S.removeChild(X[T])}else{S.insertBefore(Y,X[T++]||null)}}else{T++}}while(X[T]!=R&&X[T]){S.removeChild(X[T])}if(R!=X[T]){throw new Error("The node to insert before is not a child of the element.")}};v.prototype.renderViews=function(T,R,S,U){this.updateViews(T);this.render(R,S,U)};v.prototype.getView=function(){return this.views[0]||null};v.prototype.clear=function(){for(var R=0;R<this.views.length;R++){this.views[R].release()}this.views=[]};v.prototype.toString=function(){return a.prototype.toString.call(this)+" ("+this.views.length+" views cached)"};var O=a.extend(function(R,T,S){f(arguments,[Function,Function,j]);this.modelClass=R;this.viewClass=T;this.parentViewClassProvider=S});O.prototype.getViewClass=function(R){return R instanceof this.modelClass?this.viewClass:(this.parentViewClassProvider?this.parentViewClassProvider.getViewClass(R):null)};O.prototype.createView=function(S){var R=this.getViewClass(S);if(R){return new R(S,this)}else{throw new w(S,this)}};t.implementedBy(O);u.implementedBy(O);var l=a.extend(function(R){f(arguments,[j]);this.views=[];this.parentViewClassProvider=R});l.prototype.registerView=function(R,S){this.views[R.getClassID()]=S};l.prototype.getViewClass=function(T){var R=T.constructor;do{var S=this.views[R.getClassID()];if(S){return S}}while(R=R.superClass);return this.parentViewClassProvider?this.parentViewClassProvider.getViewClass(T):null};l.prototype.createView=function(S){var R=this.getViewClass(S);if(!R){throw new w(S,this)}return new R(S,this)};u.implementedBy(l);t.implementedBy(l);var F=y.extend();var o=F.extend();var s=a.extend(function(T,S,R){this.namespace=T;this.localName=S;this.modelClass=R});s.prototype.getNamespace=function(){return this.namespace};s.prototype.getLocalName=function(){return this.localName};s.prototype.getModelClass=function(){return this.modelClass};s.prototype.createModel=function(S,T,R){throw new Error("Must implement ElementMapping::createModel().")};s.prototype.createElement=function(T,R,S){if(!this.namespace){return R.createElement(this.localName)}else{if(R.createElementNS){return R.createElementNS(this.namespace,this.localName)}else{return R.createNode(1,this.localName,this.namespace)}}};s.prototype.getChildren=function(T,U,S){var W=[];var X=T.childNodes;for(var R=0;R<X.length;R++){if(X[R].nodeType==1){var V=this.getChild(X[R],U,S);if(V){W.push(V)}}}return W};s.prototype.getChild=function(T,U,S){var R=U.getMappingByElement(T);return R?R.createModel(T,U,S):null};s.prototype.addChild=function(S,U,T){var R=T.getMappingByModel(U);if(R){S.appendChild(R.createElement(U,S.ownerDocument))}};s.prototype.addChildren=function(S,U,T){for(var R=0;R<U.length;R++){this.addChild(S,U[R],T)}};var N=a.extend(function(){this.mappings=[];this.namespaces=[]});N.prototype.addMapping=function(R){f(arguments,[s]);this.mappings[R.getModelClass().getClassID()]=R;var T=R.getNamespace()||"";var S=R.getLocalName();if(!this.namespaces[T]){this.namespaces[T]={}}this.namespaces[T][S]=R};N.prototype.getMappingByModel=function(T){var R=T.constructor;do{var S=this.mappings[R.getClassID()];if(S){return S}}while(R=R.superClass);return null};N.prototype.createElementByModel=function(T,S){var R=this.getMappingByModel(T);if(R){return R.createElement(T,S,this)}else{throw new o("Can't find the mapping for the provided model.")}};N.prototype.getMappingByElement=function(R){var S=this.namespaces[R.namespaceURI||""];return S&&S[R.localName||R.baseName]||null};N.prototype.createModelByElement=function(T,S){var R=this.getMappingByElement(T);if(R){return R.createModel(T,this,S)}else{throw new o("Can't find the mapping for the provided XML element.")}};this.View=M;this.ViewCache=v;this.ViewNotFoundError=w;this.IViewFactory=t;this.IViewClassProvider=u;this.SimpleViewFactory=O;this.ViewRegistry=l;this.MappingError=F;this.MappingNotFoundError=o;this.ElementMapping=s;this.XMLMappingRegistry=N});b$.module("b$.xmvc",function(){var c=b$.require("b$.mvc.Model");var a=c.extend(function(d){c.call(this);this.model=d},{registerObservers:function(){},unregisterObservers:function(){},releaseFromModel:function(){this.unregisterObservers()}});this.ModelView=a;var b=a.extend(function(d){a.call(this,d);this.dom=null},{registerObservers:function(){},unregisterObservers:function(){},createDOM:function(d){throw new Error("Must implement createDOM().")},getDOM:function(d){if(!this.dom){this.dom=this.createDOM(d);this.registerObservers()}else{if(this.dom.ownerDocument!=d){throw new Error("HTML document mismatch with existing view.")}}return this.dom},releaseFromModel:function(){if(this.dom){this.unregisterObservers();if(this.dom.parentNode){this.dom.parentNode.removeChild(this.dom)}this.dom=null}}});this.View=b});b$.module("b$.mappings.xml",function(){var A=b$.require("b$.Class");var c=b$.require("b$.Interface");var s=b$.require("b$.Exception");var h=b$.require("b$.TypeConstraintNull");var i=b$.require("b$.TypeConstraintOptional");var a=b$.require("b$.testArguments");var v=b$.require("b$.types.ANY");var u=b$.require("b$.types.NUMBER");var t=b$.require("b$.types.STRING");var k=b$.require("b$.types.FUNCTION");var x=b$.require("b$.types.ELEMENT");var j=b$.require("b$.types.DOCUMENT");var B=new h(Object);var r=new h(t);var g=new i(u);var q=s.extend(function(E,D){a(arguments,[t,w]);s.call(this,E);this.builder=D});q.prototype.toString=function(){return s.prototype.toString()+" Builder: "+String(this.builder)+"."};var y=q.extend(function(D){q.call(this,"Timeout waiting for sub process result.",D)});var d=s.extend(function(E,F,D){a(arguments,[t,v,e]);s.call(this,E);this.input=F;this.mapping=D||null});d.prototype.toString=function(){return s.prototype.toString()+" Input: "+String(this.input)+". Mapping: "+String(this.mapping)+"."};var z=d.extend(function(D){d.call(this,"Can't find the mapping for the provided XML element.",D)});var b=new c({acceptBuildResult:k,acceptBuildError:k});var w=new c({build:k});var m=A.extend(function(G,E,D,F){a(arguments,[v,l,B,g]);A.call(this);this.input=G;this.registry=E;this.context=D;this.timeout=typeof F=="number"?F:60000;this.builders=[];this.results=[];this.errors=[]});m.prototype.getSubBuilders=function(){return this.builders};m.prototype.acceptSubBuilderResult=function(D,E){this.results[this.builders.indexOf(D)]=E};m.prototype.acceptSubBuilderFailure=function(D,E){this.errors[this.builders.indexOf(D)]=E};m.prototype.finalizeBuild=function(D){if(this.errors.length){D.acceptBuildError(this.errors.filter(function(E){return Boolean(E)})[0])}else{D.acceptBuildResult(this.results)}};m.prototype.startSubBuilder=function(D,F){a(arguments,[w,k]);var E=this;D.build({acceptBuildResult:function(G){E.acceptSubBuilderResult(D,G);F(D)},acceptBuildError:function(G){E.acceptSubBuilderFailure(D,G);F(D)}})};m.prototype.build=function(J){a(arguments,[b]);var I=this.getSubBuilders();var F=[];var G=0;var E=this;var K=0;function D(L){F.push(L);if(++G>=I.length){E.finalizeBuild(J);clearTimeout(K)}}if(I.length){for(var H=0;H<I.length;++H){this.startSubBuilder(I[H],D)}K=setTimeout(function(){if(F.length<I.length){for(var M=0,L;M<I.length;++M){L=I[M];if(F.indexOf(L)==-1){E.acceptSubBuilderFailure(L,new y(L))}}E.finalizeBuild(J)}},this.timeout)}else{this.finalizeBuild(J)}};w.implementedBy(m);var f=A.extend(function(D){a(arguments,[d]);A.call(this);this.error=D});f.prototype.build=function(D){D.acceptBuildError(this.error)};w.implementedBy(f);var p=m.extend(function(G,E,D,F){a(arguments,[Array]);m.call(this,G,E,D,F);this.builders=this.input.map(function(I){var H=E.getMappingByElement(I);return H&&H.createModelBuilder(I,E,D)||new f(new z(I))})});var o=m.extend(function(F,E,D,G){a(arguments,[Array]);m.call(this,F,E,null,G);this.document=D;this.builders=this.input.map(function(I){var H=E.getMappingByModel(I);return H&&H.createElementBuilder(I,E,D)||new f(new z(I))})});o.prototype.createElementNS=function(D,E){return !D?this.document.createElement(E):(this.document.createElementNS?this.document.createElementNS(D,E):this.document.createNode(1,E,D))};var n=A.extend(function(F,E,D){a(arguments,[r,t,j]);A.call(this);this.namespaceURI=F;this.localName=E;this.document=D});n.prototype.build=function(D){try{D.acceptBuildResult(this.buildElement())}catch(E){D.acceptBuildError(E)}};n.prototype.buildElement=function(){return this.createElementNS(this.namespace,this.localName)};n.prototype.createElementNS=function(D,E){return !D?this.document.createElement(E):(this.document.createElementNS?this.document.createElementNS(D,E):this.document.createNode(1,E,D))};var C=A.extend(function(F,E,D){a(arguments,[r,t,k]);this.namespace=F;this.localName=E;this.modelClass=D});C.prototype.getNamespace=function(){return this.namespace};C.prototype.getLocalName=function(){return this.localName};C.prototype.getModelClass=function(){return this.modelClass};C.prototype.createModelBuilder=function(E,F,D){throw new Error("Must implement Mapping::createModelBuilder().")};C.prototype.createElementBuilder=function(F,E,D){throw new Error("Must implement Mapping::createElementBuilder().")};var e=new i(C);var l=A.extend(function(){this.mappings=[];this.namespaces=[]});l.prototype.addMapping=function(D){a(arguments,[C]);this.mappings[D.getModelClass().getClassID()]=D;var F=D.getNamespace()||"";var E=D.getLocalName();if(!this.namespaces[F]){this.namespaces[F]={}}this.namespaces[F][E]=D};l.prototype.getMappingByModel=function(F){var D=F.constructor;do{var E=this.mappings[D.getClassID()];if(E){return E}}while(D=D.superClass);return null};l.prototype.buildElementFromModel=function(G,E,F){a(arguments,[A,j,b]);var D=this.getMappingByModel(G);if(D){D.createElementBuilder(G,this,E).build(F)}else{F.acceptBuildError(new z(G))}};l.prototype.getMappingByElement=function(D){var E=this.namespaces[D.namespaceURI||""];return E&&E[D.localName||D.baseName]||null};l.prototype.buildModelFromElement=function(F,E,G){a(arguments,[x,B,b]);var D=this.getMappingByElement(F);if(D){D.createModelBuilder(F,this,E).build(G)}else{G.acceptBuildError(new z(F))}};this.MappingError=d;this.MappingNotFoundError=z;this.BuildTimeoutError=y;this.IBuildAcceptor=b;this.IBuilder=w;this.CompositeBuilder=m;this.FailingBuilder=f;this.ModelsListBuilder=p;this.ElementsListBuilder=o;this.SimpleElementBuilder=n;this.Mapping=C;this.MappingRegistry=l});b$.module("b$.uri",function(){var a=b$.require("b$.Class");var h=a.extend(function(j){if(j instanceof h){this.scheme=j.scheme;this.authority=j.authority;this.path=j.path;this.query=j.query;this.fragment=j.fragment}else{if(j){var k=c.exec(j);this.scheme=k[1];this.authority=k[2];this.path=k[3];this.query=k[4];this.fragment=k[5]}}});h.prototype.scheme=null;h.prototype.authority=null;h.prototype.path="";h.prototype.query=null;h.prototype.fragment=null;var c=new RegExp("^(?:([^:/?#]+):)?(?://([^/?#]*))?([^?#]*)(?:\\?([^#]*))?(?:#(.*))?$");h.prototype.getScheme=function(){return this.scheme};h.prototype.getAuthority=function(){return this.authority};h.prototype.getPath=function(){return this.path};h.prototype.getQuery=function(){return this.query};h.prototype.getFragment=function(){return this.fragment};h.prototype.isAbsolute=function(){return this.scheme&&!this.fragment};h.prototype.isSameDocumentAs=function(j){return j.scheme==this.scheme&&j.authority==this.authority&&j.path==this.path&&j.query==this.query};h.prototype.equals=function(j){return this.isSameDocumentAs(j)&&j.fragment==this.fragment};h.prototype.normalize=function(){this.removeDotSegments();if(this.scheme){this.scheme=this.scheme.toLowerCase()}if(this.authority){this.authority=this.authority.replace(e,g).replace(b,d)}if(this.path){this.path=this.path.replace(b,d)}if(this.query){this.query=this.query.replace(b,d)}if(this.fragment){this.fragment=this.fragment.replace(b,d)}};var b=/%[0-9a-z]{2}/gi;var i=/[a-zA-Z0-9\-\._~]/;var e=/(.*@)?([^@:]*)(:.*)?/;function d(j){var k=unescape(j);return i.test(k)?k:j.toUpperCase()}function g(j,m,l,k){return(m||"")+l.toLowerCase()+(k||"")}h.prototype.resolve=function(k){var j=new h();if(this.scheme){j.scheme=this.scheme;j.authority=this.authority;j.path=this.path;j.query=this.query}else{j.scheme=k.scheme;if(this.authority){j.authority=this.authority;j.path=this.path;j.query=this.query}else{j.authority=k.authority;if(this.path==""){j.path=k.path;j.query=this.query||k.query}else{if(this.path.charAt(0)=="/"){j.path=this.path;j.removeDotSegments()}else{if(k.authority&&k.path==""){j.path="/"+this.path}else{j.path=k.path.substring(0,k.path.lastIndexOf("/")+1)+this.path}j.removeDotSegments()}j.query=this.query}}}j.fragment=this.fragment;return j};h.prototype.removeDotSegments=function(){var l=this.path.split("/"),j=[],m,n=l[0]=="";if(n){l.shift()}var k=l[0]==""?l.shift():null;while(l.length){m=l.shift();if(m==".."){j.pop()}else{if(m!="."){j.push(m)}}}if(m=="."||m==".."){j.push("")}if(n){j.unshift("")}this.path=j.join("/")};h.resolve=function(m,k){var j=f[m]||(f[m]=new h(m));var l=f[k]||(f[k]=new h(k));return j.resolve(l).toString()};var f={};h.prototype.toString=function(){var j="";if(this.scheme){j+=this.scheme+":"}if(this.authority){j+="//"+this.authority}j+=this.path;if(this.query){j+="?"+this.query}if(this.fragment){j+="#"+this.fragment}return j};this.URI=h});b$.module("b$.math",function(){var b=b$.require("b$.Class");var e=b$.require("b$.testArguments");var d=b.extend(function(f,g){this.x=f;this.y=g});d.prototype.translate=function(f){if(!(f instanceof a)){throw new Error("Argument must be instance of Vector.")}return new d(this.x+f.x,this.y+f.y)};d.prototype.to=function(f){if(!(f instanceof d)){throw new Error("Argument must be instance of Point.")}return new a(f.x-this.x,f.y-this.y)};d.prototype.equals=function(f){if(!(f instanceof d)){throw new Error("Argument must be instance of Point.")}return this.x==f.x&&this.y==f.y};d.prototype.toString=function(){return b.prototype.toString.call(this)+" ("+this.x+", "+this.y+")"};var a=b.extend(function(f,g){this.x=f;this.y=g});a.prototype.getLength=function(){return Math.sqrt(Math.pow(this.x,2)+Math.pow(this.y,2))};a.prototype.multiply=function(f){return new a(this.x*f,this.y*f)};a.prototype.equals=function(f){if(!(f instanceof a)){throw new Error("Argument must be instance of Vector.")}return this.x==f.x&&this.y==f.y};a.prototype.toString=function(){return b.prototype.toString.call(this)+" ("+this.x+", "+this.y+")"};var c=b.extend(function(f,g){e(arguments,[d,d]);b.call(this);this.from=f;this.to=g});c.prototype.contains=function(f){return(f.x>=Math.min(this.from.x,this.to.x)&&f.x<=Math.max(this.from.x,this.to.x)&&f.y>=Math.min(this.from.y,this.to.y)&&f.y<=Math.max(this.from.y,this.to.y))};this.Point=d;this.Vector=a;this.Rectangle=c});